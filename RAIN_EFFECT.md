# 🌧️ 下雨特效功能说明

## 功能概述

当查询的天气为雨天时，页面会自动显示逼真的下雨动画特效，包含：
- 🌧️ **动态雨滴** - 随机位置、速度、透明度
- ⚡ **智能强度** - 根据雨势自动调整雨滴数量
- 🎨 **视觉效果** - 半透明渐变雨滴，不影响内容阅读

## 特效强度分级

### 小雨 (Light Rain)
- 雨滴数量：**50 个**
- 触发条件：天气描述包含 "小雨"、"light rain"、"drizzle"
- 视觉效果：稀疏的雨滴，温和的动画

### 中雨 (Moderate Rain) - 默认
- 雨滴数量：**100 个**
- 触发条件：普通的雨天
- 视觉效果：适中密度，真实的雨天氛围

### 大雨 (Heavy Rain)
- 雨滴数量：**150 个**
- 触发条件：天气描述包含 "大雨"、"暴雨"、"heavy rain"，或图标代码 `09`
- 视觉效果：密集的雨滴，强烈的暴雨感

## 触发条件

下雨特效会在以下情况自动显示：

1. 天气描述中包含 **"雨"** (中文)
2. 天气描述中包含 **"rain"** (英文)
3. 天气图标代码包含 **`09`** (阵雨)
4. 天气图标代码包含 **`10`** (雨)

## 技术实现

### 组件结构
```
RainEffect.tsx
├── 雨滴数量根据强度动态生成
├── 每个雨滴独立的随机参数
│   ├── 位置 (0-100% 横向随机)
│   ├── 速度 (0.5-1s 下落时间)
│   ├── 延迟 (0-2s 随机延迟)
│   └── 透明度 (0.3-0.7 随机)
└── CSS 动画 (rainFall)
```

### 性能优化
- ✅ 使用 CSS 动画 (GPU 加速)
- ✅ `pointer-events: none` 不影响交互
- ✅ 固定 z-index (50) 覆盖在内容上方
- ✅ 组件仅在雨天时渲染

## 测试方法

### 方法 1: 搜索雨天城市

尝试搜索以下容易下雨的城市：
```
- 伦敦 (London)
- 西雅图 (Seattle)
- 孟买 (Mumbai) - 雨季
- 新加坡 (Singapore)
- 重庆 (Chongqing)
- 贵阳 (Guiyang)
```

### 方法 2: 查看不同强度效果

1. **小雨**: 搜索 "伦敦" (经常有小雨)
2. **中雨**: 搜索 "新加坡" (热带气候常有中雨)
3. **大雨**: 等待暴雨天气或寻找台风影响地区

### 方法 3: 开发环境测试

临时修改判断条件，让任何天气都显示下雨：
```typescript
// page.tsx 中临时修改
const isRaining = weather; // 任何天气都显示
```

## 视觉效果

```
┌─────────────────────────────────────┐
│  🌤️ 智能天气信息                    │
│  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊      │
│  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊      │
│  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊      │
│  📍 北京  🌧️  18°                   │
│  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊      │
│  中雨 · 湿度 85%                     │
│  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊  ┊ ┊      │
└─────────────────────────────────────┘
```

## 未来增强

可能的功能扩展：
- 🌨️ 雪天特效 (飘雪动画)
- ⛈️ 雷暴特效 (闪电效果)
- 🌪️ 大风特效 (飘动元素)
- 🌫️ 雾天特效 (模糊滤镜)

## 代码位置

- **特效组件**: `app/components/RainEffect.tsx`
- **主页面集成**: `app/page.tsx` (第 99-128 行)
- **动画样式**: `app/globals.css` (第 192-208 行)

---

**创建时间**: 2025-10-25
**开发工具**: Warp AI
